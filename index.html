<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <main>
        <section id="top250">
            <div class="container"></div>
            <div class="loading">
                <svg class="icon" aria-hidden="true">
                    <use xlink:href="#icon-loading"></use>
                </svg>
            </div>
        </section>
        <section id="beimei">
                <div class="container"></div>
                <div class="search-result">
                    <div class="loading">
                        <svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-loading"></use>
                        </svg>
                    </div>
                </div>
        </section>
        <section id="search">
            <div class="search-area">
                <input type="text" placeholder="搜索电影"><span class="button"> 搜索</span>
            </div>
            <div class="search-result">
                <div class="loading">
                    <svg class="icon" aria-hidden="true">
                        <use xlink:href="#icon-loading"></use>
                    </svg>
                </div>
            </div>
        </section>
    </main>
    <footer>
        <div class="active">
            <span>Top250</span>
            <svg class="icon" aria-hidden="true">
                <use xlink:href="#icon-award"></use>
            </svg>
        </div>
        <div>
            <span>北美</span>
            <svg class="icon" aria-hidden="true">
                <use xlink:href="#icon-beimei"></use>
            </svg>
        </div>
        <div>
            <span>搜索</span>
            <svg class="icon" aria-hidden="true">
                <use xlink:href="#icon-search"></use>
            </svg>
        </div>
    </footer>
    <script src="//at.alicdn.com/t/font_466046_qtb6v0arbq5xw29.js"></script>
    <script src="https://cdn.bootcss.com/jquery/1.12.3/jquery.js"></script>
    <script src="./script.js"></script>
    <script>
        // $('footer>div').click(function(){
        //     let index = $(this).index()
        //     $('section').hide().eq(index).fadeIn()
        //     $(this).addClass('active').siblings().removeClass('active')
        // })
        
        // let index = 0
        // let isLoading = false
        // let clock
        // $('main').scroll(function(){
            // if(clock){
            //     clearTimeout(clock)
            // }
            // clock = setTimeout(function(){
            //     if($('section').eq(0).height() -30 <= $('main').scrollTop() + $('main').height()){
            //         start()
            //     }  
            // },300)    
        // })
        // start()
        // function start(){
        //     if(isLoading) return
        //     isLoading = true
        //     $('.loading').show()
        //     $.ajax({
        //         url:'http://api.douban.com/v2/movie/top250',
        //         type:'GET',
        //         data:{
        //             start:index,
        //             count:20
        //         },
        //         dataType:'jsonp'
        //     }).done(function(result){
        //         console.log(result)
        //         setata(result)
        //         index += 20
        //     }).fail(function(error){
        //         console.error(error)
        //     }).always(function(){
        //         isLoading = false
        //         $('.loading').hide()
        //     })
        // }

        // function setata(data){
        //     console.log(data)
        //     data.subjects.forEach(function(movie) {
        //         let tpl = `
        //         <div class="item">
        //             <a href="#">
        //                 <div class="cover">
        //                         <img src="https://i.loli.net/2017/11/07/5a01189ad8846.jpg" alt="" > 
        //                 </div>
        //                 <div class="detail">
        //                     <h2>霸王别姬</h2>
        //                     <div class="extra"><span class="score"></span>分 / <span class="collect"></span>收藏</div>
        //                     <div class="extra"><span class="year"></span> / <span class="type"></span></div>
        //                     <div class="extra">导演：<span class="director"></span></div>
        //                     <div class="extra">主演：<span class="actor"></span></div>
        //                 </div>
        //             </a>
        //         </div>`
        //         let $node = $(tpl)
        //         $node.find('.cover img').attr('src',movie.images.medium)
        //         $node.find('.detail h2').text(movie.title)
        //         $node.find('.score').text(movie.rating.average)
        //         $node.find('.collect').text(movie.collect_count)
        //         $node.find('.year').text(movie.year)
        //         $node.find('.type').text(movie.genres.join(' / '))
        //         $node.find('.director').text(function(){
        //             let directorsArr = []
        //             movie.directors.forEach(function(item){
        //                 directorsArr.push(item.name)
        //             })
        //             return directorsArr.join('、')
        //         })
        //         $node.find('.actor').text(function(){
        //             let actorsArr = []
        //             movie.casts.forEach(function(item){
        //                 actorsArr.push(item.name)
        //             })
        //             return actorsArr.join('、')
        //         })
        //         $('#top250').append($node)
        //     });
        // }

        
    </script>
</body>
</html>